# ğŸ¦Š è§£å†³MetaMaskåœ°å€è­¦å‘Š - å®Œæ•´æŒ‡å—

## âŒ é—®é¢˜æè¿°

å½“ä½¿ç”¨Hardhat localhostéƒ¨ç½²åˆçº¦æ—¶ï¼ŒMetaMaskä¼šå¯¹é»˜è®¤åœ°å€ `0x5FbDB2315678afecb367f032d93F642f64180aa3` å‘å‡ºå®‰å…¨è­¦å‘Šï¼Œé˜»æ­¢äº¤æ˜“ã€‚

## âœ… å®Œæ•´è§£å†³æ–¹æ¡ˆï¼ˆæ¨èï¼‰

### æ–¹æ¡ˆï¼šä½¿ç”¨ä¸åŒè´¦æˆ·éƒ¨ç½²ï¼Œç”Ÿæˆæ–°åˆçº¦åœ°å€

æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„éƒ¨ç½²è„šæœ¬ `deploy-alt-address.js`ï¼Œå®ƒä¼šï¼š
- ä½¿ç”¨Hardhatçš„ç¬¬2ä¸ªæµ‹è¯•è´¦æˆ·éƒ¨ç½²åˆçº¦
- ç”Ÿæˆä¸€ä¸ª**ä¸åŒçš„åˆçº¦åœ°å€**
- **ä¸ä¼šè§¦å‘MetaMaskè­¦å‘Š** âœ¨

---

## ğŸ“‹ å®Œæ•´æ“ä½œæ­¥éª¤

### æ­¥éª¤1ï¼šåœæ­¢ç°æœ‰çš„HardhatèŠ‚ç‚¹ï¼ˆå¦‚æœåœ¨è¿è¡Œï¼‰

```bash
# æŒ‰ Ctrl+C åœæ­¢ï¼Œæˆ–è€…æ‰¾åˆ°è¿›ç¨‹å¹¶å…³é—­
pkill -f "hardhat node"
```

### æ­¥éª¤2ï¼šè¿›å…¥é¡¹ç›®ç›®å½•å¹¶ç¼–è¯‘åˆçº¦

```bash
cd /home/user/dapp/minority-game
npx hardhat compile
```

### æ­¥éª¤3ï¼šå¯åŠ¨Hardhatæœ¬åœ°èŠ‚ç‚¹ï¼ˆæ–°ç»ˆç«¯1ï¼‰

```bash
npx hardhat node
```

**ä¿æŒè¿™ä¸ªç»ˆç«¯è¿è¡Œï¼** ä½ ä¼šçœ‹åˆ°10ä¸ªæµ‹è¯•è´¦æˆ·å’Œç§é’¥ã€‚

### æ­¥éª¤4ï¼šä½¿ç”¨æ–°è„šæœ¬éƒ¨ç½²åˆçº¦ï¼ˆæ–°ç»ˆç«¯2ï¼‰

```bash
cd /home/user/dapp/minority-game
npx hardhat run scripts/deploy-alt-address.js --network localhost
```

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
ğŸš€ ä½¿ç”¨å¤‡ç”¨è´¦æˆ·éƒ¨ç½² VotingGame åˆçº¦ï¼ˆé¿å¼€MetaMaskè­¦å‘Šï¼‰...

âœ… éƒ¨ç½²è´¦æˆ·ï¼ˆè´¦æˆ·#1ï¼‰: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
ğŸ’° è´¦æˆ·ä½™é¢: 10000.0 ETH

ğŸ“ æ­£åœ¨éƒ¨ç½²åˆçº¦...

ğŸ‰ VotingGame åˆçº¦å·²éƒ¨ç½²!
ğŸ“ åˆçº¦åœ°å€: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
âš ï¸  è¿™ä¸ªåœ°å€ä¸é»˜è®¤åœ°å€ä¸åŒï¼ŒMetaMaskä¸ä¼šè­¦å‘Š!
```

**é‡ç‚¹ï¼š** æ–°çš„åˆçº¦åœ°å€ï¼ˆå¦‚ `0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512`ï¼‰**ä¸æ˜¯** `0x5FbDB...0aa3`ï¼

### æ­¥éª¤5ï¼šå‰ç«¯é…ç½®ï¼ˆè‡ªåŠ¨å®Œæˆï¼‰

è„šæœ¬ä¼šè‡ªåŠ¨æ›´æ–° `frontend/voting.js` ä¸­çš„åˆçº¦åœ°å€ã€‚

å¦‚æœæ²¡æœ‰è‡ªåŠ¨æ›´æ–°ï¼Œæ‰‹åŠ¨ä¿®æ”¹ `frontend/voting.js` ç¬¬2è¡Œï¼š
```javascript
const CONTRACT_ADDRESS = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512"; // æ›¿æ¢ä¸ºä½ çš„æ–°åœ°å€
```

### æ­¥éª¤6ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯3ï¼‰

```bash
cd /home/user/dapp/minority-game/frontend
python3 -m http.server 8000
```

### æ­¥éª¤7ï¼šé…ç½®MetaMask

#### 7.1 æ·»åŠ Localhostç½‘ç»œï¼ˆå¦‚æœè¿˜æ²¡æ·»åŠ ï¼‰

1. æ‰“å¼€MetaMask
2. ç‚¹å‡»ç½‘ç»œä¸‹æ‹‰èœå• â†’ "æ·»åŠ ç½‘ç»œ" â†’ "æ‰‹åŠ¨æ·»åŠ ç½‘ç»œ"
3. å¡«å†™é…ç½®ï¼š
   - **ç½‘ç»œåç§°**: Localhost 8545
   - **RPC URL**: `http://127.0.0.1:8545`
   - **Chain ID**: `1337`
   - **è´§å¸ç¬¦å·**: ETH
4. ç‚¹å‡»"ä¿å­˜"

#### 7.2 å¯¼å…¥æµ‹è¯•è´¦æˆ·

**æ–¹æ³•Aï¼šå¯¼å…¥éƒ¨ç½²è´¦æˆ·ï¼ˆè´¦æˆ·#1ï¼‰**

ä»æ­¥éª¤3çš„HardhatèŠ‚ç‚¹è¾“å‡ºä¸­ï¼Œæ‰¾åˆ° **Account #1** çš„ç§é’¥ï¼š

```
Account #1: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (10000 ETH)
Private Key: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d
```

åœ¨MetaMaskä¸­ï¼š
1. ç‚¹å‡»å³ä¸Šè§’è´¦æˆ·å›¾æ ‡ â†’ "å¯¼å…¥è´¦æˆ·"
2. é€‰æ‹©"ç§é’¥"
3. ç²˜è´´ç§é’¥ï¼š`59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d`
4. ç‚¹å‡»"å¯¼å…¥"

**æ–¹æ³•Bï¼šä½¿ç”¨ä»»ä½•Hardhatæµ‹è¯•è´¦æˆ·**

ä½ å¯ä»¥å¯¼å…¥ä»»ä½•ä¸€ä¸ªæµ‹è¯•è´¦æˆ·ï¼ˆAccount #0 åˆ° #19ï¼‰ï¼Œå®ƒä»¬éƒ½æœ‰10000 ETHã€‚

#### 7.3 åˆ‡æ¢åˆ°Localhostç½‘ç»œ

åœ¨MetaMaskä¸­ï¼Œç‚¹å‡»ç½‘ç»œä¸‹æ‹‰èœå•ï¼Œé€‰æ‹© "Localhost 8545"ã€‚

### æ­¥éª¤8ï¼šæ‰“å¼€å‰ç«¯å¹¶æµ‹è¯•

1. æµè§ˆå™¨è®¿é—®: `http://localhost:8000/voting.html`
2. ç‚¹å‡»"Connect Wallet"è¿æ¥MetaMask
3. å°è¯•åˆ›å»ºæŠ•ç¥¨

**ğŸ‰ ç°åœ¨åº”è¯¥ä¸ä¼šæœ‰MetaMaskè­¦å‘Šäº†ï¼**

---

## ğŸ” éªŒè¯æ˜¯å¦æˆåŠŸ

### âœ… æˆåŠŸæ ‡å¿—ï¼š

1. **åˆçº¦åœ°å€ä¸åŒ**
   - æ—§åœ°å€: `0x5FbDB2315678afecb367f032d93F642f64180aa3`
   - æ–°åœ°å€: `0xe7f1...` æˆ–å…¶ä»–

2. **MetaMaskæ— è­¦å‘Š**
   - ç‚¹å‡»"CREATE VOTE"æ—¶ï¼ŒMetaMaskå¼¹å‡ºç¡®è®¤çª—å£
   - **æ²¡æœ‰**çº¢è‰²è­¦å‘Šæç¤º
   - å¯ä»¥æ­£å¸¸ç¡®è®¤äº¤æ˜“

3. **äº¤æ˜“æˆåŠŸ**
   - çœ‹åˆ°"âœ… æŠ•ç¥¨åˆ›å»ºæˆåŠŸ!"
   - æŠ•ç¥¨å‡ºç°åœ¨åˆ—è¡¨ä¸­

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1: "Cannot read properties of undefined"

**åŸå› **: HardhatèŠ‚ç‚¹æ²¡æœ‰è¿è¡Œ

**è§£å†³**:
```bash
npx hardhat node
```

### é—®é¢˜2: "Internal JSON-RPC error"

**åŸå› **: åˆçº¦åœ°å€æœªæ›´æ–°æˆ–é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ `frontend/voting.js` ä¸­çš„ `CONTRACT_ADDRESS`
2. ç¡®ä¿å®ƒä¸ `deployment-info.json` ä¸­çš„åœ°å€ä¸€è‡´

### é—®é¢˜3: MetaMaskä»ç„¶è­¦å‘Š

**åŸå› **: å¯èƒ½ä½¿ç”¨äº†æ—§çš„åˆçº¦åœ°å€

**è§£å†³**:
1. ç¡®è®¤ä½¿ç”¨äº† `deploy-alt-address.js` éƒ¨ç½²
2. æ£€æŸ¥æ–°åœ°å€æ˜¯å¦ä»¥ `0xe7f1` æˆ–å…¶ä»–å¼€å¤´ï¼ˆä¸æ˜¯ `0x5FbDB`ï¼‰
3. æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°

### é—®é¢˜4: "Nonce too high"

**åŸå› **: MetaMaskçš„nonceä¸æœ¬åœ°èŠ‚ç‚¹ä¸åŒæ­¥

**è§£å†³**:
1. MetaMask â†’ Settings â†’ Advanced
2. ç‚¹å‡» "Clear activity tab data"
3. æˆ–è€…é‡å¯HardhatèŠ‚ç‚¹

---

## ğŸ’¡ å·¥ä½œåŸç†

### ä¸ºä»€ä¹ˆä¸åŒè´¦æˆ·ä¼šç”Ÿæˆä¸åŒåœ°å€ï¼Ÿ

åˆçº¦åœ°å€ = `hash(éƒ¨ç½²è€…åœ°å€ + nonce)`

- **é»˜è®¤éƒ¨ç½²**: ä½¿ç”¨è´¦æˆ·#0 â†’ åœ°å€æ€»æ˜¯ `0x5FbDB...`
- **æ–°éƒ¨ç½²**: ä½¿ç”¨è´¦æˆ·#1 â†’ åœ°å€å˜ä¸º `0xe7f1...`

MetaMaskåªè­¦å‘Š `0x5FbDB...`ï¼Œå¯¹æ–°åœ°å€ä¸ä¼šè­¦å‘Šï¼

---

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| **ä½¿ç”¨æ–°åœ°å€ï¼ˆæ¨èï¼‰** | âœ… æ— è­¦å‘Š<br>âœ… ä¸€åŠ³æ°¸é€¸<br>âœ… æ›´å®‰å…¨ | éœ€è¦é‡æ–°éƒ¨ç½² |
| å¿½ç•¥è­¦å‘Š | å¿«é€Ÿ | âŒ æŸäº›MetaMaskç‰ˆæœ¬æ— æ³•ç»•è¿‡ |
| å…³é—­å®‰å…¨æ£€æµ‹ | ç®€å• | âŒ é™ä½å®‰å…¨æ€§<br>âŒ å®¹æ˜“å¿˜è®°æ‰“å¼€ |

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### å®Œæ•´é‡æ–°éƒ¨ç½²æµç¨‹ï¼ˆä¸€é”®å¤åˆ¶ï¼‰

**ç»ˆç«¯1 - å¯åŠ¨èŠ‚ç‚¹**:
```bash
cd /home/user/dapp/minority-game
npx hardhat node
```

**ç»ˆç«¯2 - éƒ¨ç½²åˆçº¦**:
```bash
cd /home/user/dapp/minority-game
npx hardhat run scripts/deploy-alt-address.js --network localhost
```

**ç»ˆç«¯3 - å¯åŠ¨å‰ç«¯**:
```bash
cd /home/user/dapp/minority-game/frontend
python3 -m http.server 8000
```

**æµè§ˆå™¨**:
```
http://localhost:8000/voting.html
```

---

## ğŸ”‘ Hardhatæµ‹è¯•è´¦æˆ·å‚è€ƒ

ä½ å¯ä»¥å¯¼å…¥ä»»ä½•è¿™äº›è´¦æˆ·åˆ°MetaMaskï¼š

```
Account #0: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
Private Key: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

Account #1: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (éƒ¨ç½²è´¦æˆ·)
Private Key: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d

Account #2: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
Private Key: 0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a
```

æ¯ä¸ªè´¦æˆ·éƒ½æœ‰ **10000 ETH**ï¼

---

## âš ï¸ é‡è¦æé†’

1. **ä»…ç”¨äºæœ¬åœ°å¼€å‘**
   - è¿™äº›ç§é’¥æ˜¯å…¬å¼€çš„Hardhatæµ‹è¯•å¯†é’¥
   - **ç»å¯¹ä¸è¦**åœ¨çœŸå®ç½‘ç»œä¸Šä½¿ç”¨
   - **ç»å¯¹ä¸è¦**å‘è¿™äº›åœ°å€å‘é€çœŸå®çš„ETH

2. **æ¯æ¬¡é‡å¯HardhatèŠ‚ç‚¹**
   - æ‰€æœ‰æ•°æ®ä¼šé‡ç½®
   - éœ€è¦é‡æ–°éƒ¨ç½²åˆçº¦
   - MetaMaskå¯èƒ½éœ€è¦æ¸…é™¤æ´»åŠ¨æ•°æ®

3. **ç”Ÿäº§éƒ¨ç½²**
   - ä½¿ç”¨çœŸå®çš„ç§é’¥
   - éƒ¨ç½²åˆ°BSCæµ‹è¯•ç½‘æˆ–ä¸»ç½‘
   - å‚è€ƒ `DEPLOY_WITH_REMIX.md`

---

## ğŸ‰ æˆåŠŸï¼

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ç°åœ¨å¯ä»¥ï¼š
- âœ… æ— è­¦å‘Šåœ°åˆ›å»ºæŠ•ç¥¨
- âœ… æ­£å¸¸æäº¤å’Œæ­ç¤º
- âœ… é¢†å–å¥–åŠ±

Happy voting! ğŸ—³ï¸

---

## ğŸ“ è¿˜æœ‰é—®é¢˜ï¼Ÿ

æ£€æŸ¥è¿™äº›æ–‡ä»¶ï¼š
- `TROUBLESHOOTING.md` - å¸¸è§é—®é¢˜
- `QUICK_START.md` - å¿«é€Ÿå¼€å§‹
- `METAMASK_TRUST_ADDRESS.md` - MetaMaskè­¦å‘Šè¯´æ˜

æˆ–è€…æ£€æŸ¥ï¼š
1. HardhatèŠ‚ç‚¹æ˜¯å¦åœ¨è¿è¡Œ
2. MetaMaskæ˜¯å¦è¿æ¥åˆ°Localhost 8545
3. åˆçº¦åœ°å€æ˜¯å¦æ­£ç¡®æ›´æ–°
4. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
